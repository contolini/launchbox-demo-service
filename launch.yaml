env:
  base:
    TEST_VAR: value1
    TEST_PORT: 3000
    DEBUG: true
  # specific environments
  # (builds on base)
  production:
    DEBUG: false
resources:
  database1:
    type: postgres
    # yields:
    # - LB_database1_type
    # - LB_database1_hostname
    # - LB_database1_name
    # - LB_database1_username
    # - LB_database1_password
  cache:
    type: redis
    # yields:
    # - LB_cache_type
    # - LB_cache_url
    # - LB_cache_key_prefix
  storage:
    type: s3
    # yields:
    # - LB_storage_type
    # - LB_storage_region
    # - LB_storage_bucket
    # - LB_storage_folder
    # - LB_storage_access_key_id
    # - LB_storage_secret_access_key
phases:
  setup:
    - pip3 install -r requirements.txt
  tenant:
    # - python3 manage.py migrate --noinput
    # - python3 manage.py update_index
routes:
  api:
    route: /
    type: wsgi
    options:
      file: app/api.py
      var: app
  pages:
    route: /pages/
    type: static
    options:
      dir: pages
  assets:
    route: /static/
    type: static
    options:
      dir: static
      # or:
      # file: cms/theme/static/example.png
workers:
  sync-users:
    runtime: python3
    path: cms/jobs/sync-users.py
    schedule:
      interval: 4h
