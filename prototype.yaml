startup:
  # The startup block runs once during each new deployment
  # If a task fails, the deployment fails with it
  # Tasks are named - these names appear in logs and user-facing messages
  # Tasks execute with all runtime environment variables set
  # For example: LB_APP_ID, LB_DB_*
  tasks:
    migrate: python3 manage.py migrate --noinput
    permissions: python3 manage.py add_moderator_permissions
    reindex: python3 manage.py update_index
runtime:
  # The runtime block runs once a deployment has completed
  # Each process is executed separately
  # Standard runtime environment variables are set (LB_APP_ID, LB_DB_*, etc)
  # Special environment vars specific to each process are also set
  # For example: LB_PORT (the port that process should listen on)
  processes:
    web:
      type: django
      wsgi-file: config/app.py
